function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return a[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequired7c6=s),s("eZevs"),s("gjiCh"),s("1VOaQ"),s("5Jgp0"),s("2nhTy");var i=s("2shzp");var r=s("eZevs"),o=(r=s("eZevs"),s("2nhTy"));const c=document.querySelector(".back-to-top");function l(){document.body.scrollIntoView({behavior:"smooth"})}c.addEventListener("click",l),window.onscroll=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?c.style.display="block":c.style.display="none"};var d=s("EbluR");const g={searchForm:document.querySelector(".header-search-form"),gallery:document.querySelector(".gallery"),searchMessage:document.querySelector(".header-message"),page:document.querySelector('a[data-page="home"]'),paginationCont:document.getElementById("tui-pagination-container")};let p,u=!1;const h=new class{async fetchMovie(){try{const t="https://api.themoviedb.org/3/search/movie/",a=await e(i).get(t,{params:{api_key:"d2c21f22a2d4ccc40e22a6b0b1329764",query:this.inputValue,page:this.page}});return this.incrementPage(),a.data}catch(e){console.log(e.message)}}async getGenre(){try{const t="https://api.themoviedb.org/3/genre/movie/list?&language=en-US`";return(await e(i).get(t,{params:{api_key:"d2c21f22a2d4ccc40e22a6b0b1329764"}})).data}catch(e){console.log(e.message)}}incrementPage(){this.page+=1}resetPage(){this.page=1}get value(){return this.inputValue}set value(e){this.inputValue=e}constructor(){this.inputValue="",this.page=1,this.genres=""}};async function m(e){g.gallery.innerHTML="",g.searchMessage.classList.add("is-hidden");const t=e.results.map((({id:e,poster_path:t,title:a,release_date:n,genre_ids:s})=>{let i;i=void 0!==n&&n.length>4?n.slice(0,4):"";const o=function(e,t){let a=[];return e.forEach((e=>{const n=t.find((t=>e===t.id));n&&a.push(n.name)})),a}(s,r.GENRES_FULL_INFO);let c;if(o.length>2){const e=o.slice(0,2);e.push("Other"),c=e.join(", ")}else c=o.join(", ");return`\n      <li class="card-set__item" id="${e}">\n      <a href='#' id='${e}' class="card-link">\n      <picture>\n                    <source srcset="\n                    http://image.tmdb.org/t/p/w780/${t} 1x,\n                   http://image.tmdb.org/t/p/original/${t} 2x" media="(min-width: 1280px)" type="image/jpeg" />\n                    <source srcset="\n                    http://image.tmdb.org/t/p/w342/${t} 1x,\n                    http://image.tmdb.org/t/p/w500/${t} 2x" media="(min-width: 768px)" type="image/jpeg" />\n                    <source srcset="\n                    http://image.tmdb.org/t/p/w185/${t} 1x,\n                    http://image.tmdb.org/t/p/w342/${t} 2x" media="(max-width: 480px)" type="image/jpeg" />\n         <img id="${e}\n          loading="lazy"\n          src="http://image.tmdb.org/t/p/w342/${t}"\n          alt="${a}"\n          class="card-set__img "/>\n      </picture>\n     \n      <h3 class="card-set__title">${a}</h3>\n      <div class="card-set__description" id="${e}">\n      <span class="card-set__genre" id="${e}"> ${c} &nbsp| ${i}</span>\n        </div>\n      </a>\n      </li>\n      `})).join("");(0,r.addToHTML)(t)}g.searchForm.addEventListener("submit",(async function(e){try{if(e.preventDefault(),e.stopPropagation(),g.paginationCont.classList.remove("is-hidden"),h.resetPage(),h.value=e.currentTarget.elements.searchQuery.value,""===h.value)return g.searchMessage.classList.remove("is-hidden"),g.paginationCont.classList.add("is-hidden"),void(g.searchMessage.innerHTML="I can`t find an empty request. Please input something.");if(""!==h.value){const e=await h.fetchMovie(h.value);if(p=e.total_results,p){g.gallery.innerHTML="",o.pagination.reset(p);const{results:t}=e,a=(0,d.filmCheckImgUrl)(t);await m({...e,...a}),u=!0}}if(0===p)return g.searchMessage.classList.remove("is-hidden"),g.paginationCont.classList.add("is-hidden"),void(g.searchMessage.innerHTML="Search result not successful. Enter the correct movie name and try again.");e.target.reset()}catch(e){console.log(e)}})),o.pagination.on("afterMove",(e=>{const t=e.page;if(u){const t=e.page;h.page=t,async function(){if(""!==h.value){const e=await h.fetchMovie(h.value),{results:t}=e,a=(0,d.filmCheckImgUrl)(t);await m({...e,...a})}}(),l()}else(0,r.onPaginLoadMore)(t),l()})),s("aNDbS"),s("dDKeO");
//# sourceMappingURL=index.5c33e980.js.map
