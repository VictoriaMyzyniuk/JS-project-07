function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=s),s("eZevs"),s("gjiCh"),s("1VOaQ"),s("5Jgp0"),s("2nhTy");var i=s("2shzp");var o=s("eZevs"),r=(o=s("eZevs"),s("2nhTy"));const c=document.querySelector(".back-to-top");function l(){document.body.scrollIntoView({behavior:"smooth"})}c.addEventListener("click",l),window.onscroll=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?c.style.display="block":c.style.display="none"};const d={searchForm:document.querySelector(".header-search-form"),gallery:document.querySelector(".gallery"),searchMessage:document.querySelector(".header-message"),page:document.querySelector('a[data-page="home"]'),paginationCont:document.getElementById("tui-pagination-container")};let g,p=!1;const u=new class{async fetchMovie(){try{const t="https://api.themoviedb.org/3/search/movie/",n=await e(i).get(t,{params:{api_key:"d2c21f22a2d4ccc40e22a6b0b1329764",query:this.inputValue,page:this.page}});return this.incrementPage(),n.data}catch(e){console.log(e.message)}}async getGenre(){try{const t="https://api.themoviedb.org/3/genre/movie/list?&language=en-US`";return(await e(i).get(t,{params:{api_key:"d2c21f22a2d4ccc40e22a6b0b1329764"}})).data}catch(e){console.log(e.message)}}incrementPage(){this.page+=1}resetPage(){this.page=1}get value(){return this.inputValue}set value(e){this.inputValue=e}constructor(){this.inputValue="",this.page=1,this.genres=""}};async function h(e){d.gallery.innerHTML="",d.searchMessage.classList.add("is-hidden");const t=e.results.map((({id:e,poster_path:t,title:n,release_date:a,genre_ids:s})=>{let i;i=void 0!==a&&a.length>4?a.slice(0,4):"";const r=function(e,t){let n=[];return e.forEach((e=>{const a=t.find((t=>e===t.id));a&&n.push(a.name)})),console.log("result",n),n}(s,o.GENRES_FULL_INFO).slice(0,2);r.push("Other");return`\n      <li class="card-set__item" id="${e}">\n      <a href='#' id='${e}' class="card-link">\n      <picture>\n                    <source srcset="\n                    http://image.tmdb.org/t/p/w780/${t} 1x,\n                   http://image.tmdb.org/t/p/original/${t} 2x" media="(min-width: 1280px)" type="image/jpeg" />\n                    <source srcset="\n                    http://image.tmdb.org/t/p/w342/${t} 1x,\n                    http://image.tmdb.org/t/p/w500/${t} 2x" media="(min-width: 768px)" type="image/jpeg" />\n                    <source srcset="\n                    http://image.tmdb.org/t/p/w185/${t} 1x,\n                    http://image.tmdb.org/t/p/w342/${t} 2x" media="(max-width: 480px)" type="image/jpeg" />\n         <img id="${e}\n          loading="lazy"\n          src="http://image.tmdb.org/t/p/w342/${t}"\n          alt="${n}"\n          class="card-set__img "/>\n      </picture>\n     \n      <h3 class="card-set__title">${n}</h3>\n      <div class="card-set__description" id="${e}">\n      <span class="card-set__genre" id="${e}"> ${r.join(", ")} &nbsp| ${i}</span>\n        </div>\n      </a>\n      </li>\n      `})).join("");(0,o.addToHTML)(t)}d.searchForm.addEventListener("submit",(async function(e){try{if(e.preventDefault(),e.stopPropagation(),d.paginationCont.classList.remove("is-hidden"),u.resetPage(),console.log(e.currentTarget.elements.searchQuery.value),u.value=e.currentTarget.elements.searchQuery.value,""===u.value)return d.searchMessage.classList.remove("is-hidden"),d.paginationCont.classList.add("is-hidden"),void(d.searchMessage.innerHTML="I can`t find an empty request. Please input something.");if(""!==u.value){const e=await u.fetchMovie(u.value);console.log("fetch",e),g=e.total_results,g&&(d.gallery.innerHTML="",r.pagination.reset(g),await h(e),p=!0)}if(0===g)return d.searchMessage.classList.remove("is-hidden"),d.paginationCont.classList.add("is-hidden"),void(d.searchMessage.innerHTML="Search result not successful. Enter the correct movie name and try again.");e.target.reset()}catch(e){console.log(e)}})),r.pagination.on("afterMove",(e=>{const t=e.page;if(p){const t=e.page;console.log(t),console.log(u.page),u.page=t,async function(){if(""!==u.value){const e=await u.fetchMovie(u.value);console.log("fetch in render",e),await h(e)}}(),l()}else(0,o.onPaginLoadMore)(t),l()})),s("aNDbS"),s("dDKeO");
//# sourceMappingURL=index.9d3914f7.js.map
